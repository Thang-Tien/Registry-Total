(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8894],{99145:function(t,e,l){Promise.resolve().then(l.bind(l,34399))},34399:function(t,e,l){"use strict";l.r(e),l.d(e,{default:function(){return i}});var a=l(57437),n=l(93928);function i(){return(0,a.jsx)("div",{children:(0,a.jsx)(n.default,{})})}},93928:function(t,e,l){"use strict";l.r(e),l.d(e,{default:function(){return k}});var a=l(57437),n=l(54440),i=l.n(n),s=l(1482),o=l.n(s),r=l(53049),c=l(80216),h=l(59477),u=()=>(0,a.jsxs)(h.Z.Col,{gap:"20px",children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(c.Z,{})]}),d=l(48150),g=l(6034),f=l(2265),x=()=>{let[t,e]=(0,f.useState)([]),[l,n]=(0,f.useState)(!1),i=t=>new Promise(e=>setTimeout(e,t));return(0,f.useEffect)(()=>{n(!0);let t=async()=>{await i(1500);try{let t=await fetch("http://fall2324w3g10.int3306.freeddns.org/api/v1/inspections/stat/all_centre/count/by_year?year=2023");if(!t.ok)throw Error("Fail to get data");let l=await t.json(),a=[];l.data.forEach(t=>{a.push({count:t.total,month:t.month.toString()})}),e(a),n(!1)}catch(t){n(!1),console.log(t)}};t()},[]),(0,a.jsx)(g.Z,{title:"Biểu đồ đăng kiểm",children:(0,a.jsx)(d.Z,{data:t,xField:"month",yField:"count",height:300,xAxis:{tickCount:5},slider:{start:.5,end:1},meta:{count:{alias:"Số lượng"}},smooth:!0})})},p=l(79716),j=l(43676),w=l(50721),y=l(22826),m=l(43918),v=l(31468),b=l(23172),Z=l(38440);let S=new Date,C=[];for(let t=S.getFullYear();t>=2014;t--)C.push(t);let F=["Đ\xf4ng Bắc Bộ","T\xe2y Bắc Bộ","Đồng bằng S\xf4ng Hồng"],T=["Bắc Trung Bộ","Duy\xean hải Nam Trung Bộ","T\xe2y Nguy\xean"],B=["Đ\xf4ng Nam Bộ","Đồng bằng S\xf4ng Cửu Long"],E=new Map;E.set("all",[...F,...T,...B]),E.set("Miền Bắc",F),E.set("Miền Trung",T),E.set("Miền Nam",B);var M=()=>{let[t,e]=(0,f.useState)(S.getFullYear()),[l,n]=(0,f.useState)(!1),[i,s]=(0,f.useState)("month"),[o,r]=(0,f.useState)([]),[c,h]=(0,f.useState)("all"),[u,d]=(0,f.useState)("all"),[x,p]=(0,f.useState)("all"),[j,F]=(0,f.useState)([]),[T,B]=(0,f.useState)([]),M=t=>new Promise(e=>setTimeout(e,t));return(0,f.useEffect)(()=>{n(!0);let e=async()=>{await M(1500);try{let e="?year=".concat(t);"all"!=c&&(e+="&side=".concat(c)),"all"!=u&&(e+="&area=".concat(u)),"all"!=x&&(e+="&address=".concat(x));let l=await fetch("http://fall2324w3g10.int3306.freeddns.org/api/v1/inspections/stat/all_centre/count/every_month".concat(e));if(!l.ok)throw Error("Fail to get data");let a=await l.json(),s=[],o=[0,0,0,0,0],h=0;if(a.data.forEach(t=>{"month"===i?s.push({count:t.total,option:t.month.toString()}):(o[Math.ceil(t.month/4)]+=t.total,h=1)}),h)for(let t=1;t<5;t++)s.push({count:o[t],option:t.toString()});console.log(s),r(s),n(!1)}catch(t){n(!1),console.log(t)}};e()},[t,i,c,u,x]),(0,f.useEffect)(()=>{n(!0),F(E.get(c));let t="/api/v1/centres";"all"!=c&&(t+="?side=".concat(c)),"all"!=u&&(t+="&area=".concat(u)),"all"!=x&&(t+="&address=".concat(x));let e=async()=>{await M(1e3);try{let e=await fetch("http://fall2324w3g10.int3306.freeddns.org".concat(t));if(!e.ok)throw Error("Fail to get data");let l=await e.json(),a=[];l.data.forEach(t=>{a.push(t.address)}),a=Array.from(new Set(a)),B(a),n(!1)}catch(t){n(!1),console.log(t)}};e(),console.log(t)},[c,u,x]),(0,a.jsxs)(g.Z,{title:"Số liệu thống k\xea",style:{height:"100%"},extra:(0,a.jsxs)(Z.Z,{size:"middle",children:[(0,a.jsx)(v.default,{disabled:l,defaultValue:t,onChange:t=>{e(t)},style:{width:100},listHeight:200,options:[...C.map(t=>({value:t,label:t}))]}),(0,a.jsx)(v.default,{defaultValue:i,onChange:t=>{s(t)},style:{width:120},disabled:l,listHeight:200,options:[{value:"month",label:"Theo th\xe1ng"},{value:"season",label:"Theo qu\xfd"}]})]}),children:[(0,a.jsxs)(m.Z,{gutter:[20,20],style:{marginBottom:"2.4rem"},children:[(0,a.jsx)(y.Z,{children:(0,a.jsx)(v.default,{disabled:l,value:c,onChange:t=>{h(t),d("all"),p("all")},style:{width:120},listHeight:200,options:[{value:"all",label:"Miền"},{value:"Miền Bắc",label:"Miền Bắc"},{value:"Miền Trung",label:"Miền Trung"},{value:"Miền Nam",label:"Miền Nam"}]})}),(0,a.jsx)(y.Z,{children:(0,a.jsx)(v.default,{value:u,disabled:"all"===c||l,onChange:t=>{d(t),p("all")},style:{width:200},listHeight:200,options:[{value:"all",label:"Khu vực"},...j.map(t=>({value:t,label:t}))]})}),(0,a.jsx)(y.Z,{children:(0,a.jsx)(v.default,{value:x,disabled:"all"===u||l,onChange:t=>{p(t)},style:{width:200},listHeight:200,options:[{value:"all",label:"Tỉnh/Th\xe0nh phố"},...T.map(t=>({value:t,label:t}))]})})]}),(0,a.jsx)(b.Z,{loading:l,active:!0,paragraph:{rows:5},children:(0,a.jsx)(w.Z,{data:o,xField:"option",yField:"count",height:300,label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},xAxis:{label:{autoHide:!0,autoRotate:!1}},meta:{count:{alias:"Số lượng"},month:{alias:"Th\xe1ng"}}})})]})},k=t=>{let{className:e,style:l}=t;return(0,f.useEffect)(()=>{document.title="Thống k\xea"},[]),(0,a.jsx)("div",{className:i()(e,o().container),style:l,children:(0,a.jsxs)(h.Z.Row,{style:{height:"100vh",width:"100vw"},padding:"0",children:[(0,a.jsx)(p.default,{active:"statistic",openMenu:""}),'"',(0,a.jsx)("div",{style:{background:"#e4e4e7",width:"calc(100vw - 256px - 8px)",overflow:"auto"},children:(0,a.jsxs)(h.Z.Col,{justifyContent:"center",style:{height:"100vh",margin:"0 50px"},children:[(0,a.jsxs)(h.Z.Row,{gap:"24px",justifyContent:"center",style:{height:"50%"},children:[(0,a.jsx)(h.Z.Cell,{children:(0,a.jsx)(u,{})}),(0,a.jsx)(h.Z.Cell,{style:{height:"458px",width:"20000px"},children:(0,a.jsx)(M,{})})]}),(0,a.jsxs)(h.Z.Row,{gap:"24px",justifyContent:"center",children:[(0,a.jsx)(h.Z.Cell,{style:{width:"66%"},children:(0,a.jsx)(x,{})}),(0,a.jsx)(h.Z.Cell,{style:{width:"38%"},children:(0,a.jsx)(j.Z,{height:"405px"})})]})]})})]})})}},1482:function(){}},function(t){t.O(0,[2155,6259,3527,4242,3172,6034,187,8104,1468,1342,3400,2342,7916,2971,2472,1744],function(){return t(t.s=99145)}),_N_E=t.O()}]);