(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1235],{6716:function(e,t,s){Promise.resolve().then(s.bind(s,73240))},73240:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var i=s(57437),n=s(43918),o=s(22826),r=s(2265),a=s(79532),l=s(79148),c=s(63730),h=s(930),d=s(10176),u=s.n(d),m=()=>(0,i.jsxs)("div",{className:u().intro,children:[(0,i.jsxs)("div",{className:u().logo,children:[(0,i.jsx)(a.Z,{src:h.Z.src,height:32,preview:!1}),(0,i.jsx)("h1",{className:u().title,children:"Registry"})]}),(0,i.jsx)(l.ZP,{theme:{token:{colorBgContainer:"var(--color-black)"}},children:(0,i.jsxs)(c.Z,{autoplay:!0,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(a.Z,{src:"/_next/static/media/carousel-1.599dae79.svg",preview:!1,className:u().img}),(0,i.jsx)("h2",{className:u().subtitle,children:"Đảm bảo phương tiện di chuyển an to\xe0n hơn"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(a.Z,{src:"/_next/static/media/carousel-2.b12b0d95.svg",preview:!1,className:u().img}),(0,i.jsx)("h2",{className:u().subtitle,children:"Giải quyết đăng kiểm nhanh ch\xf3ng v\xe0 uy t\xedn"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(a.Z,{src:"/_next/static/media/carousel-3.da4b21f8.svg",preview:!1,className:u().img}),(0,i.jsx)("h2",{className:u().subtitle,children:"Thống k\xea trở n\xean dễ d\xe0ng hơn bao giờ hết"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(a.Z,{src:"/_next/static/media/carousel-4.45cd3fbe.svg",preview:!1,className:u().img}),(0,i.jsx)("h2",{className:u().subtitle,children:"Theo d\xf5i th\xf4ng tin đăng kiểm tr\xean to\xe0n quốc"})]})]})})]}),g=s(68026),p=s.n(g),f=s(38250),x=s(63589),j=s(20068),y=s(80109),b=s(6052),_=s(92458),A=s.n(_),k=s(36468),N=s(24033),w=e=>{let[t,s]=(0,r.useState)(!1),[n,o]=f.default.useNotification(),a=(0,N.useRouter)(),[c,h]=(0,r.useState)({role:""}),d=()=>{n.error({message:"Lỗi",description:"Th\xf4ng tin đăng nhập kh\xf4ng ch\xednh x\xe1c."})};(0,r.useEffect)(()=>{"staff"===c.role&&a.push("/dashboards"),"admin"===c.role&&a.push("/dashboard")},[c]);let u=async e=>{s(!0);try{let t=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw d(),s(!1),Error("Can not authenticate.");let i=await t.json();if(localStorage.setItem("accessToken",i.token),localStorage.setItem("data",JSON.stringify(i.user[0])),console.log(i.user[0]),h(i.user[0]),i.token)console.log(c.role);else throw s(!1),Error("Failed to authenticate.")}catch(e){s(!1),console.error(e)}};return(0,i.jsx)(l.ZP,{theme:{token:{colorBgContainer:"#F1F6F5",borderRadius:10,controlHeight:34,colorBgContainerDisabled:"#4096ff",colorTextDisabled:"#fff",colorErrorOutline:"none",controlOutline:"none"}},children:(0,i.jsxs)("div",{className:A().form,children:[o,(0,i.jsx)("h1",{className:A().title,children:"Welcome back!"}),(0,i.jsxs)(x.Z,{name:"login",className:A().login,onFinish:u,children:[(0,i.jsx)(x.Z.Item,{name:"email",rules:[{required:!0,message:"H\xe3y nhập email"}],children:(0,i.jsx)(j.Z,{prefix:(0,i.jsx)(k.WNJ,{className:A().icon}),placeholder:"Email",type:"email",autoComplete:"off",size:"large",className:A().input})}),(0,i.jsx)(x.Z.Item,{name:"password",rules:[{required:!0,message:"H\xe3y nhập mật khẩu"}],children:(0,i.jsx)(j.Z.Password,{prefix:(0,i.jsx)(k.gMo,{className:A().icon}),type:"password",size:"large",placeholder:"Mật khẩu",autoComplete:"off",className:A().input})}),(0,i.jsx)(x.Z.Item,{children:(0,i.jsx)(y.default.Link,{onClick:()=>e.turnOnForgotMode(),className:A().forgot,children:"Qu\xean mật khẩu?"})}),(0,i.jsx)(x.Z.Item,{children:(0,i.jsx)(b.ZP,{type:"primary",htmlType:"submit",className:A().button,size:"large",loading:t,disabled:t,style:{fontSize:"1.6rem"},children:t?"Đang đăng nhập...":"Đăng nhập"})})]})]})})},Z=s(37275),C=s(3464),v=s.n(C),T=e=>{let[t,s]=(0,r.useState)(!1),n=async t=>{s(!0);try{let i=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/users/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok)throw e.openNotification("Lỗi","Kh\xf4ng t\xecm thấy email n\xe0y."),e.setStatus("error"),s(!1),Error("Could not find email.");let n=await i.json();console.log(n),e.setStatus("finish"),e.setFindingEmail(!1),e.setVerifying(!0),e.setEmail(t.email),e.next()}catch(e){console.error(e),console.log("loi me roi dit cu")}};return(0,i.jsxs)(x.Z,{name:"findEmail",onFinish:n,children:[(0,i.jsx)(x.Z.Item,{name:"email",rules:[{required:!0,message:"H\xe3y nhập email"}],children:(0,i.jsx)(j.Z,{prefix:(0,i.jsx)(k.WNJ,{className:v().icon}),placeholder:"Email",type:"email",autoComplete:"off",size:"large",className:v().input,style:{paddingLeft:".4rem"}})}),(0,i.jsxs)(x.Z.Item,{children:[(0,i.jsx)(b.ZP,{type:"primary",htmlType:"submit",className:v().button,size:"large",loading:t,style:{fontSize:"1.6rem"},disabled:t,children:t?"Đang t\xecm kiếm":"Tiếp tục"}),(0,i.jsx)(l.ZP,{theme:{token:{colorBgContainerDisabled:"rgba(0, 0, 0, 0.04)",colorTextDisabled:"rgba(0, 0, 0, 0.25)"}},children:(0,i.jsx)(b.ZP,{htmlType:"button",className:v().button,style:{height:"4.2rem"},disabled:t,onClick:()=>{e.turnOffForgotMode()},children:"Trở về đăng nhập"})})]})]})},S=e=>{let[t,s]=(0,r.useState)(!1),n=async t=>{s(!0);try{let i=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/users/check-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({otp:t.otp,email:e.email})}),n=await i.json();if(console.log(n),!i.ok)throw e.openNotification("Lỗi","M\xe3 x\xe1c thực kh\xf4ng ch\xednh x\xe1c."),e.setStatus("error"),s(!1),Error("Could not authenticate.");e.setStatus("finish"),e.setTokenReset(t.otp),e.setVerifying(!1),e.setResetting(!0),e.next()}catch(e){console.error(e)}};return(0,i.jsxs)(x.Z,{name:"verify-token",onFinish:n,children:[(0,i.jsx)(x.Z.Item,{name:"otp",rules:[{required:!0,message:"H\xe3y nhập m\xe3 x\xe1c thực"}],children:(0,i.jsx)(j.Z.Password,{placeholder:"M\xe3 x\xe1c thực",type:"password",autoComplete:"off",size:"large",className:v().input})}),(0,i.jsxs)(x.Z.Item,{children:[(0,i.jsx)(b.ZP,{type:"primary",htmlType:"submit",className:v().button,size:"large",loading:t,disabled:t,style:{fontSize:"1.6rem"},children:"Tiếp tục"}),(0,i.jsx)(l.ZP,{theme:{token:{colorBgContainerDisabled:"rgba(0, 0, 0, 0.04)",colorTextDisabled:"rgba(0, 0, 0, 0.25)"}},children:(0,i.jsx)(b.ZP,{htmlType:"button",className:v().button,style:{height:"4.2rem"},disabled:t,onClick:()=>{e.turnOffForgotMode()},children:"Trở về đăng nhập"})})]})]})},E=e=>{let[t,s]=(0,r.useState)(!1),{error:n}=f.default,o=(0,N.useRouter)(),a=e=>new Promise(t=>setTimeout(t,e)),c=async t=>{s(!0);try{let i=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/users/reset-password"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({otp:e.tokenReset,email:e.email,newPassword:t.password})});if(i.ok)e.openNotification("Th\xe0nh c\xf4ng","Đổi mật khẩu th\xe0nh c\xf4ng."),await a(1e3);else throw s(!1),Error("Could not authenticate.");let n=await i.json();"Success"==n.status&&o.push("/")}catch(e){s(!1),console.error(e)}};return(0,i.jsxs)(x.Z,{name:"reset",onFinish:c,children:[(0,i.jsx)(x.Z.Item,{name:"password",rules:[{required:!0,message:"H\xe3y nhập mật khẩu mới"}],children:(0,i.jsx)(j.Z.Password,{prefix:(0,i.jsx)(k.gMo,{}),placeholder:"Mật khẩu mới",type:"password",autoComplete:"off",size:"large"})}),(0,i.jsx)(x.Z.Item,{name:"passwordConfirm",dependencies:["password"],rules:[{required:!0,message:"H\xe3y nhập lại mật khẩu"},e=>{let{getFieldValue:t}=e;return{validator:(e,s)=>s&&t("password")!==s?Promise.reject(Error("Mật khẩu kh\xf4ng tr\xf9ng khớp")):Promise.resolve()}}],children:(0,i.jsx)(j.Z.Password,{prefix:(0,i.jsx)(k.gMo,{}),placeholder:"Nhập lại mật khẩu mới",type:"password",autoComplete:"off",size:"large"})}),(0,i.jsxs)(x.Z.Item,{children:[(0,i.jsx)(b.ZP,{type:"primary",htmlType:"submit",size:"large",loading:t,disabled:t,children:"Tiếp tục"}),(0,i.jsx)(l.ZP,{theme:{token:{colorBgContainerDisabled:"rgba(0, 0, 0, 0.04)",colorTextDisabled:"rgba(0, 0, 0, 0.25)"}},children:(0,i.jsx)(b.ZP,{htmlType:"button",style:{height:"4.2rem"},disabled:t,onClick:()=>{e.turnOffForgotMode()},children:"Trở về đăng nhập"})})]})]})};let P=[{title:"T\xecm kiếm",key:"find"},{title:"X\xe1c thực",key:"authenticate"},{title:"Đặt lại mật khẩu",key:"reset"}];var O=e=>{let[t,s]=(0,r.useState)(!0),[n,o]=(0,r.useState)(!1),[a,c]=(0,r.useState)(!1),[h,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[g,p]=(0,r.useState)(0),[x,j]=(0,r.useState)("process"),[y,b]=f.default.useNotification(),_=(e,t)=>{"Lỗi"===e?y.error({message:e,description:t}):y.success({message:e,description:t})},A=()=>{p(e=>e+1)},k=()=>{e.turnOffForgotMode()},N=P.map(e=>({key:e.key,title:e.title}));return(0,i.jsxs)("div",{className:v().reset,children:[b,(0,i.jsx)(Z.Z,{status:"process"===x||"finish"===x||"wait"===x||"error"===x?x:"process",progressDot:!0,size:"small",current:g,items:N}),(0,i.jsxs)("h1",{className:v().title,children:[t&&"H\xe3y bắt đầu bằng c\xe1ch t\xecm kiếm email của bạn",n&&"H\xe3y kiểm tra h\xf2m thư của bạn nh\xe9",a&&"Thiết lập lại mật khẩu"]}),(0,i.jsx)(l.ZP,{theme:{token:{colorBgContainer:"#F1F6F5",borderRadius:10,controlHeight:34,colorBgContainerDisabled:"#4096ff",colorTextDisabled:"#fff",colorErrorOutline:"none",controlOutline:"none"}},children:(0,i.jsxs)("div",{style:{width:"70%"},children:[t&&(0,i.jsx)(T,{turnOffForgotMode:k,setFindingEmail:s,setVerifying:o,next:A,openNotification:_,setStatus:j,setEmail:m}),n&&(0,i.jsx)(S,{turnOffForgotMode:k,setVerifying:o,setResetting:c,next:A,openNotification:_,setTokenReset:d,setStatus:j,email:u}),a&&(0,i.jsx)(E,{turnOffForgotMode:k,tokenReset:h,openNotification:_,email:u})]})})]})};let I=new Date().getFullYear();var D=()=>{let[e,t]=(0,r.useState)(!1);return(0,i.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[!e&&(0,i.jsx)(w,{turnOnForgotMode:()=>{t(!0)}}),e&&(0,i.jsx)(O,{turnOffForgotMode:()=>{t(!1)}}),(0,i.jsxs)("div",{className:p().copy,children:["\xa9 ",I," all right reserved"]})]})};s(41193);var F=()=>((0,r.useEffect)(()=>{document.title="Đăng nhập"},[]),(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(o.Z,{lg:10,xs:0,children:(0,i.jsx)(m,{})}),(0,i.jsx)(o.Z,{lg:14,xs:24,children:(0,i.jsx)(D,{})})]}))},41193:function(){},68026:function(e){e.exports={copy:"AuthenticationForm_copy__A7dTf"}},10176:function(e){e.exports={intro:"IntroCarousel_intro__eQIj_",title:"IntroCarousel_title__y92tS",img:"IntroCarousel_img__i6xpJ",logo:"IntroCarousel_logo__C9_Zm",subtitle:"IntroCarousel_subtitle__SLDE5"}},92458:function(e){e.exports={form:"Login_form__2IxDN",login:"Login_login__EAQHo",title:"Login_title__inOhW",icon:"Login_icon__V3DDu",input:"Login_input__iMI_e",forgot:"Login_forgot__Vvh_a",button:"Login_button__qcgIq"}},3464:function(e){e.exports={reset:"Reset_reset__Pq2x1",input:"Reset_input__EByOg",icon:"Reset_icon__wUz96",button:"Reset_button__Wg_Cw",title:"Reset_title__GVjOi"}},930:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.cfa00cdd.png",height:256,width:256,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR4nAEIAff+AX1cXAOxpKT9fQAAABNrHgDdLE5YPzcsjgoH8gzOyZilAX9ycgCTjo4QpAAAI2QAAOy1vYSqMDUuNu3q4QD58bcAAQB3ciC67PWh/zA3Pu37BgAjMPf/Hh8E/wT98AL99sMAAZqFh9gu9P8nwFNa/w8KCwH44NYAWBrXAAsU+v6/uXWEAchjZdMXIxQsDOr7/fD19QEPDBL/5QbsA+rW2t9Hs78lAcxta/8AIf4ACeQNAJr8AgBf/fkAAyL3AP672vSZuNgtAayfof0bExb99gL99f0ICfsC+fgEB/b8Dd/h4fledG4oAWlmbfvl/fZ+7U5EkXj8BRCq+/Ty88LKWxb6AYmanJUkK61/wUDohZEAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[3190,2155,3969,2831,5775,3881,3365,187,504,8904,9532,6514,1344,6381,2971,4938,1744],function(){return e(e.s=6716)}),_N_E=e.O()}]);