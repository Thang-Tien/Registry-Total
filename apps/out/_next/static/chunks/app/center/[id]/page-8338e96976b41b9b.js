(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4793],{5075:function(e,t,n){Promise.resolve().then(n.bind(n,16810))},81017:function(e,t,n){"use strict";var a=n(57437),o=n(63589),r=n(38250),i=n(68104),l=n(20068),s=n(31468),c=n(2265);t.Z=e=>{let[t]=o.Z.useForm(),[n,d]=(0,c.useState)(!1),[h,g]=r.default.useNotification(),m=e=>new Promise(t=>setTimeout(t,e)),u=(e,t,n)=>{h[e]({message:t,description:n})};return(0,a.jsxs)(a.Fragment,{children:[g,(0,a.jsx)(i.Z,{title:"edit"===e.mode?"Chỉnh sửa trung t\xe2m":"Th\xeam một trung t\xe2m mới",onCancel:()=>{t.resetFields(),e.setOpen(!1)},open:e.open,okButtonProps:{loading:n},okText:n?"edit"===e.mode?"Đang chỉnh sửa":"Đang tạo trung t\xe2m":"edit"===e.mode?"Chỉnh sửa":"Tạo trung t\xe2m",cancelText:"Hủy",cancelButtonProps:{disabled:n},onOk:async()=>{d(!0),await m(1500);try{let n=await t.validateFields(),a={name:"".concat("edit"===e.mode?n.name:"Trung t\xe2m đăng kiểm ".concat(n.name.trim())),address:"".concat(n.address),phone:"".concat(n.phone),email:"".concat(n.email)},o=JSON.stringify(a),r=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/centres/").concat("edit"===e.mode?"update":"add","_centre").concat("edit"===e.mode?"/".concat(e.centerId):""),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")},body:o});if(await r.json(),!r.ok){let e=n.message.replace("name","T\xean trung t\xe2m").replace("slug","T\xean trung t\xe2m").replace("phone","Số điện thoại");throw u("error","Lỗi",e.charAt(0).toUpperCase().concat(e.slice(1))),Error("Failed")}"edit"===e.mode&&(e.setCenterName(a.name),e.setCenterAddress(a.address),e.setCenterPhone(a.phone),e.setCenterEmail(a.email)),d(!1),t.resetFields(),e.setOpen(!1)}catch(t){d(!1),e.setOpen(!1),console.log(t)}},children:(0,a.jsxs)(o.Z,{form:t,name:"center_form",labelCol:{span:6},layout:"vertical",initialValues:"edit"===e.mode&&e.initialValues,children:[(0,a.jsx)(o.Z.Item,{name:"name",label:"T\xean trung t\xe2m",style:{marginTop:"2rem"},rules:[{required:!0,message:"Trường n\xe0y kh\xf4ng được để trống!"}],children:(0,a.jsx)(l.Z,{addonBefore:"Trung t\xe2m đăng kiểm",maxLength:100,allowClear:!0})}),(0,a.jsx)(o.Z.Item,{name:"address",label:"Địa chỉ",rules:[{required:!0,message:"Trường n\xe0y kh\xf4ng được để trống!"}],children:(0,a.jsx)(s.default,{showSearch:!0,allowClear:!0,placeholder:"Chọn tỉnh/th\xe0nh phố",options:e.addressList.map(e=>({value:e,title:e}))})}),(0,a.jsx)(o.Z.Item,{name:"phone",label:"Số điện thoại",rules:[{required:!0,message:"Trường n\xe0y kh\xf4ng được để trống!"}],children:(0,a.jsx)(l.Z,{maxLength:10,allowClear:!0})}),(0,a.jsx)(o.Z.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Trường n\xe0y kh\xf4ng được để trống!"}],children:(0,a.jsx)(l.Z,{maxLength:100,allowClear:!0})})]})})]})}},16810:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var a=n(57437),o=n(6034),r=n(6052),i=n(71787),l=n(77322),s=n(23172),c=n(38437),d=n(38440),h=n(34993),g=n(2265),m=n(36468),u=n(65362),x=n(34021),p=n(81017),y=n(32011),f=n(18501),_=n(24033),j=e=>{let[t,n]=(0,g.useState)(!1),[o,i]=(0,g.useState)(""),[j,T]=(0,g.useState)(""),[w,k]=(0,g.useState)(""),[S,Z]=(0,g.useState)(""),[b,I]=(0,g.useState)(0),[v,C]=(0,g.useState)(!1),A=(0,_.useRouter)(),[H,P]=(0,g.useState)(!1),[D,E]=l.ZP.useMessage(),[z,B]=(0,g.useState)([]),L=e=>new Promise(t=>setTimeout(t,e)),N=(e,t)=>{D.open({type:e,content:t})};return(0,g.useEffect)(()=>{n(!0),(async()=>{await L(1500);try{let t=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/centres?centre_id=").concat(e.centerId),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")}});if(!t.ok)throw Error("Fail to get data");let a=await t.json();if(i(a.data[0].name),T(a.data[0].address),Z(a.data[0].email),k(a.data[0].phone),!(t=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/centres/staff/").concat(e.centerId),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")}})).ok)throw Error("Fail to get data");a=await t.json(),I(a.data.length),n(!1)}catch(e){n(!1),console.log(e)}})()},[]),(0,a.jsxs)("div",{style:{padding:"2rem 3.2rem 0"},children:[E,",",(0,a.jsx)(s.Z,{loading:t,active:!0,children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[(0,a.jsx)(p.Z,{open:H,setOpen:P,addressList:z,mode:"edit",initialValues:{name:o,phone:w,email:S,address:j},centerId:e.centerId,setCenterName:i,setCenterAddress:T,setCenterPhone:k,setCenterEmail:Z}),(0,a.jsxs)(c.default,{bordered:!0,column:1,children:[(0,a.jsx)(c.default.Item,{label:(0,a.jsxs)(y.Z.Row,{alignItems:"center",gap:"10px",children:[(0,a.jsx)(m.gpR,{}),(0,a.jsx)(f.Z.Div,{content:"T\xean trung t\xe2m"})]}),children:o}),(0,a.jsx)(c.default.Item,{label:(0,a.jsxs)(y.Z.Row,{alignItems:"center",gap:"10px",children:[(0,a.jsx)(m.kXE,{}),(0,a.jsx)(f.Z.Div,{content:"Địa chỉ"})]}),children:j}),(0,a.jsx)(c.default.Item,{label:(0,a.jsxs)(y.Z.Row,{alignItems:"center",gap:"10px",children:[(0,a.jsx)(m.Ty1,{}),(0,a.jsx)(f.Z.Div,{content:"Số điện thoại"})]}),children:w}),(0,a.jsx)(c.default.Item,{label:(0,a.jsxs)(y.Z.Row,{alignItems:"center",gap:"10px",children:[(0,a.jsx)(m.WNJ,{}),(0,a.jsx)(f.Z.Div,{content:"Email"})]}),children:S}),(0,a.jsx)(c.default.Item,{label:(0,a.jsxs)(y.Z.Row,{alignItems:"center",gap:"10px",children:[(0,a.jsx)(m.FJ3,{}),(0,a.jsx)(f.Z.Div,{content:"Số lượng nh\xe2n vi\xean"})]}),children:b})]}),(0,a.jsxs)(d.Z,{size:"middle",children:[(0,a.jsx)(r.ZP,{icon:(0,a.jsx)(u.Z,{}),onClick:async()=>{P(!0);let e=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/centres"),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")}}),t=await e.json();t=t.data;let n=[];t.forEach(e=>{n.push(e.address)}),B(n=Array.from(new Set(n)))},children:"Chỉnh sửa"}),(0,a.jsx)(h.Z,{title:"X\xf3a trung t\xe2m",description:"Bạn c\xf3 chắc chắn muốn x\xf3a trung t\xe2m n\xe0y?",okText:v?"Đang x\xf3a...":"Tiếp tục",cancelText:"Hủy",onConfirm:async()=>{C(!0);try{if(!(await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/centres/deactivate/").concat(e.centerId),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")}})).ok)throw Error("Fail to delete center");N("success","X\xf3a trung t\xe2m th\xe0nh c\xf4ng"),C(!1),A.back()}catch(e){C(!1),console.log(e)}},children:(0,a.jsx)(r.ZP,{danger:!0,type:"primary",icon:(0,a.jsx)(x.Z,{}),children:"X\xf3a trung t\xe2m"})})]})]})})]})},T=n(63589),w=n(68104),k=n(20068),S=n(10884),Z=e=>{let[t,n]=(0,g.useState)([]),[o,i]=(0,g.useState)(!1),[c,d]=l.ZP.useMessage(),[u,x]=(0,g.useState)(!1),[p,_]=(0,g.useState)(0),[j]=T.Z.useForm(),[Z,b]=(0,g.useState)(!1),[I,v]=(0,g.useState)(!1),C=e=>new Promise(t=>setTimeout(t,e)),A=(e,t)=>{c.open({type:e,content:t})};return(0,g.useEffect)(()=>{i(!0),(async()=>{await C(1500);try{let t=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/centres/staff/").concat(e.centerId),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")}});if(!t.ok)throw Error("Fail to get data");let a=await t.json(),o=[];a.data.forEach(e=>{let t,n;o.push({key:e.user_id,name:e.name,birth:(n=(t=e.date_of_birth.split("-"))[2].split("T")[0],"".concat(n,"/").concat(t[1],"/").concat(t[0])),phone:e.phone,email:e.email})}),n(o),i(!1)}catch(e){i(!1),console.log(e)}})()},[p]),(0,a.jsxs)("div",{style:{padding:"10px 20px"},children:[d,",",(0,a.jsxs)(s.Z,{loading:o,active:!0,children:[(0,a.jsx)(w.Z,{title:"Th\xeam một nh\xe2n vi\xean mới",onCancel:()=>{j.resetFields(),v(!1)},onOk:async()=>{b(!0);try{let t=await j.validateFields(),n={name:"".concat(t.name),ssn:"".concat(t.ssn),phone:"".concat(t.phone),email:"".concat(t.email),date_of_birth:"".concat(t.dateOfBirth),centre_id:e.centerId};console.log(n);let a=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/users/create_account"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")},body:JSON.stringify(n)}),o=await a.json();if(!a.ok){let e=o.message.replace("ssn","M\xe3 CCCD").replace("slug","T\xean trung t\xe2m").replace("phone","Số điện thoại");throw A("error",e.charAt(0).toUpperCase().concat(e.slice(1))),Error("There was an error.")}v(!1),b(!1),j.resetFields(),_(1-p)}catch(e){b(!1),console.log(e)}},open:I,okText:Z?"Đang th\xeam...":"Th\xeam",cancelText:"Hủy",children:(0,a.jsxs)(T.Z,{form:j,name:"staff_form",labelCol:{span:6},children:[(0,a.jsx)(T.Z.Item,{name:"name",label:"T\xean nh\xe2n vi\xean",style:{marginTop:"2rem"},rules:[{required:!0,message:"Trường n\xe0y kh\xf4ng được để trống!"}],children:(0,a.jsx)(k.Z,{maxLength:100})}),(0,a.jsx)(T.Z.Item,{name:"ssn",label:"M\xe3 CCCD",style:{marginTop:"2rem"},rules:[{required:!0,message:"Trường n\xe0y kh\xf4ng được để trống!"}],children:(0,a.jsx)(k.Z,{maxLength:12})}),(0,a.jsx)(T.Z.Item,{name:"phone",label:"Số điện thoại",rules:[{required:!0,message:"Trường n\xe0y kh\xf4ng được để trống!"}],children:(0,a.jsx)(k.Z,{maxLength:10})}),(0,a.jsx)(T.Z.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Trường n\xe0y kh\xf4ng được để trống!"}],children:(0,a.jsx)(k.Z,{placeholder:"abc@vr.com.vn",maxLength:100})}),(0,a.jsx)(T.Z.Item,{name:"dateOfBirth",label:"Ng\xe0y sinh",rules:[{required:!0,validator(e,t){if(t){let e=!0,[n,a,o]=t.split("/");if(new Date([o,a,n].join("-"))>new Date)e=!1;else{let t;n&&(n=n.padStart(2,"0")),a&&(a=a.padStart(2,"0")),o&&(o=o.padStart(4,"0")),t=[n,a,o].join("/").split("/"),"Invalid Date"===new Date("".concat(t[2],"/").concat(t[1],"/").concat(t[0])).toString()&&(e=!1)}return e?Promise.resolve():Promise.reject(Error("Ng\xe0y sinh kh\xf4ng hợp lệ"))}return 0!==t.trim().length?Promise.resolve():Promise.reject(Error("Trường n\xe0y kh\xf4ng được để trống!"))}}],children:(0,a.jsx)(k.Z,{placeholder:"dd/mm/yyyy",maxLength:10})})]})}),(0,a.jsx)(S.Z,{columns:[{title:"Họ v\xe0 t\xean",dataIndex:"name",key:"name",width:"25%",align:"center"},{title:"Ng\xe0y sinh",dataIndex:"birth",key:"birth",width:"15%",align:"center"},{title:"Số điện thoại",dataIndex:"phone",key:"phone",width:"15%",align:"center"},{title:"Email",dataIndex:"email",key:"email",width:"25%",align:"center"},{dataIndex:"",key:"x",width:"5%",align:"center",render:e=>(0,a.jsx)(h.Z,{title:"X\xf3a nh\xe2n vi\xean",description:"Bạn c\xf3 chắc chắn muốn x\xf3a nh\xe2n vi\xean n\xe0y?",okText:u?"Đang x\xf3a":"X\xf3a",cancelText:"Hủy",onConfirm:async()=>{x(!0);try{let t=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/users/delete_account"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")},body:JSON.stringify({user_id:e.key})});if(console.log("l"),!t.ok)throw Error("Fail to delete user");A("success","X\xf3a th\xe0nh c\xf4ng nh\xe2n vi\xean ".concat(e.name)),x(!1),_(1-p)}catch(e){x(!1),console.log(e)}},children:(0,a.jsx)(r.ZP,{danger:!0,type:"text",children:(0,a.jsx)(m.BFV,{style:{verticalAlign:"middle"}})})})}],dataSource:t,scroll:{x:780},pagination:!1,footer:()=>(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"6px",justifyContent:"center"},children:(0,a.jsx)(r.ZP,{type:"dashed",shape:"round",size:"large",onClick:()=>v(!0),children:(0,a.jsxs)(y.Z.Row,{alignItems:"center",gap:"5px",children:[(0,a.jsx)(m.RWZ,{}),(0,a.jsx)(f.Z.Div,{content:"Th\xeam nh\xe2n vi\xean"})]})})})})]})]})},b=n(69212),I=n(79148),v=n(80066),C=n.n(v),A=n(75393),H=n(39282),P=n(68829),D=n.n(P),E=n(61396),z=n.n(E);let{RangePicker:B}=b.default;var L=e=>{let[t,n]=(0,g.useState)([]),[o,i]=(0,g.useState)(!1),[l,s]=(0,g.useState)(""),[c,h]=(0,g.useState)(""),m=e=>new Promise(t=>setTimeout(t,e)),u=(0,g.useRef)(null);function x(e){let t=e.split("-"),n=t[2].split("T")[0];return"".concat(n,"/").concat(t[1],"/").concat(t[0])}let p=(e,t)=>{let n=e.split("/"),a=new Date("".concat(n[2],"/").concat(n[1],"/").concat(n[0]));n=t.split("/");let o=new Date("".concat(n[2],"/").concat(n[1],"/").concat(n[0]));return a<o?-1:a>o?1:0},y=(e,t,n)=>{t(),s(e[0]),h(n)},f=(e,t)=>{e(),s(""),t(),s(""),h("")},_=(e,t,n)=>{t(),s(e[0]),h(n)},j=(e,t)=>{e(),s(""),t(),s(""),h("")},T=e=>({filterDropdown:t=>{let{setSelectedKeys:n,selectedKeys:o,confirm:i,clearFilters:l}=t;return(0,a.jsxs)("div",{style:{padding:8,display:"flex",flexDirection:"column",gap:"8px",width:"30rem"},children:[(0,a.jsx)(B,{allowClear:!1,placeholder:["Từ ng\xe0y","Đến ng\xe0y"],format:"DD-MM-YYYY",value:o[0],onChange:e=>{null!==e&&n(e.length?[e]:[])}}),(0,a.jsxs)(d.Z,{size:"middle",style:{margin:"auto"},children:[(0,a.jsx)(r.ZP,{role:"reset",onClick:()=>j(l,i),children:"Đặt lại"}),(0,a.jsx)(r.ZP,{type:"primary",role:"search",onClick:()=>_(o,i,e),icon:(0,a.jsx)(A.Z,{}),children:"T\xecm kiếm"})]})]})},onFilter:(t,n)=>new Date(n[e])>=new Date(t[0])&&new Date(n[e])<=new Date(t[1])}),w=e=>({filterDropdown:t=>{let{setSelectedKeys:n,selectedKeys:o,confirm:i,clearFilters:l}=t;return(0,a.jsxs)("div",{style:{padding:8},onKeyDown:e=>e.stopPropagation(),children:[(0,a.jsx)(k.Z,{ref:u,placeholder:"T\xecm kiếm ".concat("inspectionNumber"===e?"số đăng kiểm":"biển số xe "),value:o[0],onChange:e=>n(e.target.value?[e.target.value]:[]),onPressEnter:()=>y(o,i,e),style:{marginBottom:8,display:"block"}}),(0,a.jsxs)(d.Z,{size:"middle",children:[(0,a.jsx)(r.ZP,{role:"reset",onClick:()=>l&&f(l,i),size:"middle",style:{width:90},children:"Đặt lại"}),(0,a.jsx)(r.ZP,{type:"primary",onClick:()=>y(o,i,e),icon:(0,a.jsx)(A.Z,{}),size:"middle",children:"T\xecm kiếm"})]})]})},filterIcon:e=>(0,a.jsx)(A.Z,{style:{color:e?"#1890ff":void 0}}),onFilter:(t,n)=>n[e].toString().toLowerCase().includes(t.toLowerCase()),onFilterDropdownOpenChange:e=>{e&&setTimeout(()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.select()},100)},render:t=>c===e?(0,a.jsx)(D(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[l],autoEscape:!0,textToHighlight:t?t.toString():""}):t});(0,g.useEffect)(()=>{i(!0),(async()=>{await m(1500);try{let t=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/inspections?centre_id=").concat(e.centerId),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")}});if(!t.ok)throw Error("Fail to get data");let a=await t.json(),o=[];console.log(a.data),a.data.forEach(e=>{o.push({key:e.inspection_id,inspectionNumber:e.inspection_number,numberPlate:"".concat(e.number_plate),inspectionDate:x(e.inspection_date),expiredDate:x(e.expired_date)})}),n(o),i(!1)}catch(e){i(!1),console.log(e)}})()},[]);let Z=[{title:"Số đăng kiểm",dataIndex:"inspectionNumber",key:"inspectionNumber",align:"center",sorter:(e,t)=>e.inspectionNumber.localeCompare(t.inspectionNumber),sortDirections:["ascend"],showSorterTooltip:!1,...w("inspectionNumber")},{title:"Biển số xe",dataIndex:"numberPlate",key:"numberPlate",align:"center",...w("numberPlate")},{title:"Ng\xe0y đăng kiểm",dataIndex:"inspectionDate",key:"inspectionDate",align:"center",render:e=>e,sorter:(e,t)=>p(e.inspectionDate,t.inspectionDate),sortDirections:["ascend"],showSorterTooltip:!1,...T("inspectionDate")},{title:"Ng\xe0y hết hạn",dataIndex:"expiredDate",key:"expiredDate",align:"center",render:e=>e,sorter:(e,t)=>p(e.expiredDate,t.expiredDate),sortDirections:["descend","ascend"],showSorterTooltip:!1,...T("expiredDate")},{title:"",dataIndex:"action",key:"action",align:"center",render:(e,t)=>{let{key:n}=t;return(0,a.jsx)(z(),{className:C().more,href:"/inspection/".concat(n),children:(0,a.jsx)(H.Z,{})})}}];return(0,a.jsx)(I.ZP,{theme:{token:{fontWeightStrong:500,colorFillAlter:"f5f5f5"}},children:(0,a.jsx)(S.Z,{title:()=>"Tổng số xe đ\xe3 đăng kiểm: ".concat(t.length),loading:o,columns:Z,className:C().table,dataSource:t,pagination:{position:["bottomCenter"]},scroll:{x:650}})})},N=e=>(0,a.jsx)(L,{centerId:e.centerId}),F=n(50721),W=n(31468);let O=new Date,R=[];for(let e=O.getFullYear();e>=2014;e--)R.push(e);var M=e=>{let[t,n]=(0,g.useState)(!1),[r,i]=(0,g.useState)([]),[l,s]=(0,g.useState)(O.getFullYear().toString()),[c,h]=(0,g.useState)("month"),m=e=>new Promise(t=>setTimeout(t,e));return(0,g.useEffect)(()=>{n(!0),(async()=>{await m(1500);try{let t=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/inspections/stat/").concat(e.centerId,"/count/every_month?year=").concat(l),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")}});if(!t.ok)throw Error("Fail to get data");let a=await t.json(),o=[],r=[0,0,0,0,0],s=0;if(a.data.forEach(e=>{"month"===c?o.push({count:e.total,option:e.month.toString()}):(r[Math.ceil(e.month/4)]+=e.total,s=1)}),s)for(let e=1;e<5;e++)o.push({count:r[e],option:e.toString()});console.log(o),i(o),n(!1)}catch(e){n(!1),console.log(e)}})()},[l,c]),(0,a.jsx)(o.Z,{title:"Số liệu thống k\xea",loading:t,style:{height:"100%"},extra:(0,a.jsxs)(d.Z,{size:"middle",children:[(0,a.jsx)(W.default,{disabled:t,defaultValue:l,onChange:e=>{s(e)},style:{width:100},listHeight:200,options:[...R.map(e=>({value:e,label:e}))]}),(0,a.jsx)(W.default,{defaultValue:c,onChange:e=>{h(e)},style:{width:120},disabled:t,listHeight:200,options:[{value:"month",label:"Theo th\xe1ng"},{value:"season",label:"Theo qu\xfd"}]})]}),children:(0,a.jsx)(F.Z,{data:r,xField:"option",yField:"count",height:350,label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},xAxis:{label:{autoHide:!0,autoRotate:!1}},meta:{count:{alias:"Số lượng"},month:{alias:"Th\xe1ng"}}})})},q=e=>(0,a.jsx)(M,{centerId:e.centerId}),G=n(74427),X=e=>{let[t,n]=(0,g.useState)(!1),[r,i]=(0,g.useState)([]),l=e=>new Promise(t=>setTimeout(t,e));return(0,g.useEffect)(()=>{n(!0),(async()=>{await l(1500);let t=new Date().getFullYear();t=2023;let a=new Date().getMonth();a=12;try{let o=await fetch("".concat("http://fall2324w3g10.int3306.freeddns.org","/api/v1/inspections/stat/").concat(e.centerId,"/count/every_month?year=").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")}});if(!o.ok)throw Error("Fail to get data");let r=await o.json(),l=0,s=Math.round(50*Math.random()),c=0;r.data.forEach(e=>{e.month<=a&&(console.log(e.count),a-e.month>=8?l+=e.total:a-e.month==0?s+=e.total:a-e.month<=2&&(c+=e.total))});let d=[];d.push({type:"Đ\xe3 hết hạn",value:l}),d.push({type:"Sắp hết hạn",value:c}),d.push({type:"Mới (dự đo\xe1n)",value:s}),i(d),n(!1)}catch(e){n(!1),console.log(e)}})()},[]),(0,a.jsx)(o.Z,{title:"Trong th\xe1ng n\xe0y",loading:t,children:(0,a.jsx)(G.Z,{appendPadding:10,data:r,angleField:"value",colorField:"type",radius:.75,legend:{position:"right"},label:{type:"inner",content:"{value}"},interactions:[{type:"element-selected"},{type:"element-active"}],height:e.height})})},K=n(38790),Y=e=>{let t=e.centerId,n=(0,_.useRouter)();(0,g.useEffect)(()=>{document.title="Xem trung t\xe2m"},[]);let l=[{key:"center-info",label:"Th\xf4ng tin trung t\xe2m",children:(0,a.jsx)(j,{centerId:t,setError:e.setError})},{key:"staff-info",label:"Th\xf4ng tin nh\xe2n vi\xean",children:(0,a.jsx)(Z,{centerId:t})},{key:"inspections",label:"Tất cả đăng kiểm",children:(0,a.jsx)(N,{centerId:t})},{key:"statistics",label:"Thống k\xea",children:(0,a.jsx)(q,{centerId:t})},{key:"this-month",label:"Trong th\xe1ng n\xe0y",children:(0,a.jsx)(X,{centerId:t})}];return(0,a.jsx)("div",{children:(0,a.jsxs)(y.Z.Row,{style:{height:"100vh",width:"100vw"},padding:"0",children:[(0,a.jsx)(K.Z,{active:"center",openMenu:""}),'"',(0,a.jsx)("div",{style:{background:"#e4e4e7",width:"calc(100vw - 256px - 8px)",overflow:"auto",display:"flex",justifyContent:"center",padding:"100px 0"},children:(0,a.jsx)(y.Z.Cell,{style:{marginBottom:"100px"},children:(0,a.jsx)(o.Z,{style:{width:"1200px"},title:(0,a.jsx)(r.ZP,{type:"text",icon:(0,a.jsx)(m.gYP,{style:{fontSize:"2rem",verticalAlign:"middle"}}),onClick:()=>{n.back()}}),children:(0,a.jsx)(i.Z,{defaultActiveKey:"center-info",items:l,centered:!0})})})})]})})}},38790:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var a=n(57437),o=n(2265),r=n(8349),i=n(78740),l=n(82673),s=n(75393),c=n(75377),d=n(6371),h=n(68104),g=n(1342),m=n(12048),u=n(32011),x=n(930),p=n(18501),y=n(16691),f=n.n(y);function _(){return(0,a.jsxs)(u.Z.Row,{style:{width:"inherit"},gap:"10px",alignItems:"flex-end",children:[(0,a.jsx)(f(),{src:x.Z.src,width:40,height:40,alt:"Logo"}),(0,a.jsx)(p.Z.Div,{content:"Registry VN",fontWeight:"bold",size:"heading4",lineHeight:"small"})]})}var j=n(78582),T=n.n(j),w=n(24033);function k(e,t,n,a,o){return{key:t,icon:n,children:a,label:e,type:o}}function S(e){let{active:t,openMenu:n}=e,x=[k("Bảng điều khiển","dashboard",(0,a.jsx)(r.Z,{})),k("Quản l\xfd c\xe1c trung t\xe2m","center",(0,a.jsx)(i.Z,{})),k("Quản l\xfd phương tiện","carOpen",(0,a.jsx)(l.Z,{}),[k("Tra cứu phương tiện","car"),k("Tải l\xean dữ liệu","upload")]),k("Tra cứu đăng kiểm","inspection",(0,a.jsx)(s.Z,{})),k("Thống k\xea","statistic",(0,a.jsx)(c.Z,{})),k("T\xe0i khoản","accountOpen",(0,a.jsx)(d.Z,{}),[k("C\xe0i đặt","setting/profile"),k("Đăng xuất","auth")])],p=["carOpen","accountOpen"],[y,f]=(0,o.useState)(!1),[j,S]=(0,o.useState)([n]),Z=(0,w.useRouter)();return(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Z,{title:"Tải l\xean dữ liệu xe đ\xe3 đăng k\xed",open:y,onOk:()=>{f(!1)},onCancel:()=>{f(!1)},footer:[],children:(0,a.jsx)(g.ZP,{status:"500",title:"500",subTitle:"Chức năng n\xe0y tạm thời bị kh\xf3a. Vui l\xf2ng thử lại sau.",style:{paddingBottom:0}})}),(0,a.jsxs)(u.Z.Col,{gap:"50px",style:{maxWidth:"256px"},children:[(0,a.jsx)("button",{className:T().button,children:(0,a.jsx)(_,{})}),(0,a.jsx)(m.Z,{defaultSelectedKeys:[t],onClick:e=>{let t=e.keyPath[0];if("upload"===e.keyPath[0]){f(!0);return}Z.prefetch("/".concat(e.keyPath[0])),Z.push("/".concat(e.keyPath[0])),"auth"===t&&localStorage.clear()},mode:"inline",openKeys:j,onOpenChange:e=>{let t=e.find(e=>-1===j.indexOf(e));t&&-1===p.indexOf(t)?S(e):S(t?[t]:[]),console.log(t+" "+e)},style:{width:256},items:x})]})]})}},32011:function(e,t,n){"use strict";var a=n(57437);function o(e){let{className:t,style:n,children:o,...r}=e;return(0,a.jsx)("div",{className:t,style:{...r,...n},children:o})}n(2265),t.Z={Row:function(e){return(0,a.jsx)(o,{display:"flex",flexDirection:"row",...e})},Col:function(e){return(0,a.jsx)(o,{display:"flex",flexDirection:"column",...e})},Cell:function(e){return(0,a.jsx)(o,{...e})}}},18501:function(e,t,n){"use strict";var a=n(57437),o=n(54440),r=n.n(o),i=n(73015),l=n.n(i);let s={div:"",span:"",h1:l().asH1,h2:l().asH2,h3:l().asH3,h4:l().asH4,h5:l().asH5,h6:l().asH6},c={heading1:l().sizeHeading1,heading2:l().sizeHeading2,heading3:l().sizeHeading3,heading4:l().sizeHeading4,heading5:l().sizeHeading5,heading6:l().sizeHeading6,body:l().sizeBody,bodySmall:l().sizeBodySmall,bodyExtraSmall:l().sizeBodyExtraSmall,extraLarge:l().sizeExtraLarge,none:""},d={large:l().lineHeightLarge,medium:l().lineHeightMedium,small:l().lineHeightSmall,none:""},h={ink:l().colorInk,ink80:l().colorInk80,ink50:l().colorInk50,ink30:l().colorInk30,ink10:l().colorInk10,primary:l().colorPrimary,primary80:l().colorPrimary80,primary50:l().colorPrimary50,primary30:l().colorPrimary30,primary10:l().colorPrimary10,secondary:l().colorSecondary,secondary80:l().colorSecondary80,secondary50:l().colorSecondary50,secondary30:l().colorSecondary30,secondary10:l().colorSecondary10,white:l().colorWhite,white80:l().colorWhite80,white50:l().colorWhite50,white30:l().colorWhite30,white10:l().colorWhite10,grey:l().colorGrey,grey80:l().colorGrey80,grey50:l().colorGrey50,grey30:l().colorGrey30,grey10:l().colorGrey10,inherit:l().colorInherit,none:""},g={regular:l().fontWeightRegular,semibold:l().fontWeightSemibold,bold:l().fontWeightBold,black:l().fontWeightBlack,none:""},m={1:l().maxLines1,2:l().maxLines2,3:l().maxLines3,4:l().maxLines4,5:l().maxLines5,none:""};function u(e){let{className:t,style:n,as:o="div",content:i,children:u=i,size:x="body",lineHeight:p="none",color:y="ink",fontWeight:f="none",maxLines:_="none",...j}=e;return(0,a.jsx)("div",{className:r()(t,l().container),style:n,...j,children:(0,a.jsx)(o,{className:r()(s[o],c[x],d[p],h[y],g[f],m[_]),children:u})})}t.Z={Div:u,Span:function(e){let{className:t,style:n,as:o="span",content:i,children:m=i,size:u="none",lineHeight:x="none",color:p="none",fontWeight:y="none",...f}=e;return(0,a.jsx)(o,{className:r()(t,l().container,s[o],c[u],d[x],h[p],g[y]),style:n,...f,children:m})},H1:function(e){return(0,a.jsx)(u,{as:"h1",...e})},H2:function(e){return(0,a.jsx)(u,{as:"h2",...e})},H3:function(e){return(0,a.jsx)(u,{as:"h3",...e})},H4:function(e){return(0,a.jsx)(u,{as:"h4",...e})},H5:function(e){return(0,a.jsx)(u,{as:"h5",...e})},H6:function(e){return(0,a.jsx)(u,{as:"h6",...e})}}},80066:function(e){e.exports={table:"InspectionTable_table__SNkWH",more:"InspectionTable_more__ubuEc"}},78582:function(e){e.exports={button:"NavBar_button__wE8m5"}},73015:function(e){e.exports={container:"Text_container__jYyhq",asH1:"Text_asH1__t9TKS",asH2:"Text_asH2__TpFo5",asH3:"Text_asH3__zn_o2",asH4:"Text_asH4__cMaO_",asH5:"Text_asH5__PNa26",asH6:"Text_asH6__Jd5WP",sizeHeading1:"Text_sizeHeading1__46yiy",sizeHeading2:"Text_sizeHeading2__DIAE8",sizeHeading3:"Text_sizeHeading3__ADEer",sizeHeading4:"Text_sizeHeading4__Hmlp2",sizeHeading5:"Text_sizeHeading5__wdNxD",sizeHeading6:"Text_sizeHeading6___5T8_",sizeBody:"Text_sizeBody__TTGJU",sizeBodySmall:"Text_sizeBodySmall__OMLnU",sizeBodyExtraSmall:"Text_sizeBodyExtraSmall__C6a7I",sizeExtraLarge:"Text_sizeExtraLarge__PLB17",lineHeightLarge:"Text_lineHeightLarge__jQJSl",lineHeightMedium:"Text_lineHeightMedium__2HH4u",lineHeightSmall:"Text_lineHeightSmall__hGmCd",colorInk:"Text_colorInk__4lVlf",colorInk80:"Text_colorInk80__5KJ2t",colorInk50:"Text_colorInk50__wngEr",colorInk30:"Text_colorInk30__zZqt3",colorInk10:"Text_colorInk10__03oV8",colorPrimary:"Text_colorPrimary__ZqWrm",colorPrimary80:"Text_colorPrimary80__NC56I",colorPrimary50:"Text_colorPrimary50__vSiZb",colorPrimary30:"Text_colorPrimary30__rdvgx",colorPrimary10:"Text_colorPrimary10__dcaL2",colorSecondary:"Text_colorSecondary__sIw97",colorSecondary80:"Text_colorSecondary80__V3FHf",colorSecondary50:"Text_colorSecondary50__N32C8",colorSecondary30:"Text_colorSecondary30__qKqaL",colorSecondary10:"Text_colorSecondary10__sXKK6",colorWhite:"Text_colorWhite__30qqg",colorWhite80:"Text_colorWhite80__QbcH4",colorWhite50:"Text_colorWhite50__YP6S3",colorWhite30:"Text_colorWhite30__ZCNj0",colorWhite10:"Text_colorWhite10__5QhZX",colorGrey:"Text_colorGrey__MtJfX",colorGrey80:"Text_colorGrey80__nS8Fn",colorGrey50:"Text_colorGrey50__biXlP",colorGrey30:"Text_colorGrey30__ot2b3",colorGrey10:"Text_colorGrey10__VzFuB",colorInherit:"Text_colorInherit__Aek_x",fontWeightRegular:"Text_fontWeightRegular__5drCS",fontWeightSemibold:"Text_fontWeightSemibold__3Pcvr",fontWeightBold:"Text_fontWeightBold__UipBi",fontWeightBlack:"Text_fontWeightBlack__6ncM4",maxLines1:"Text_maxLines1__Gkc3l",maxLines2:"Text_maxLines2__Zx_DS",maxLines3:"Text_maxLines3__pry93",maxLines4:"Text_maxLines4__oKLUn",maxLines5:"Text_maxLines5__RMmKG"}},930:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.cfa00cdd.png",height:256,width:256,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR4nAEIAff+AX1cXAOxpKT9fQAAABNrHgDdLE5YPzcsjgoH8gzOyZilAX9ycgCTjo4QpAAAI2QAAOy1vYSqMDUuNu3q4QD58bcAAQB3ciC67PWh/zA3Pu37BgAjMPf/Hh8E/wT98AL99sMAAZqFh9gu9P8nwFNa/w8KCwH44NYAWBrXAAsU+v6/uXWEAchjZdMXIxQsDOr7/fD19QEPDBL/5QbsA+rW2t9Hs78lAcxta/8AIf4ACeQNAJr8AgBf/fkAAyL3AP672vSZuNgtAayfof0bExb99gL99f0ICfsC+fgEB/b8Dd/h4fledG4oAWlmbfvl/fZ+7U5EkXj8BRCq+/Ty88LKWxb6AYmanJUkK61/wUDohZEAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[3190,2155,3969,1180,2831,5775,3881,3172,3365,6034,187,3330,8104,1468,1342,6680,1396,7738,504,8904,9378,3965,3400,884,8829,6907,2971,4938,1744],function(){return e(e.s=5075)}),_N_E=e.O()}]);